# Bot 开发 TODO

## 已完成

- [x] 建立 C++ 项目骨架（`include/`、`src/`、`cmake/`）
- [x] 新建并配置 `CMakeLists.txt`
- [x] 抽取公共方向工具（`DirectionUtils`）
- [x] 实现 4 个策略函数占位与基础逻辑
- [x] 提供统一入口 `src/main.cpp`
- [x] 支持运行 `bot_main` 后并发控制 4 个 Bot（多线程）
- [x] 默认使用回环地址 `http://127.0.0.1:18080`
- [x] 代码添加中文注释
- [x] 本地 CMake 编译通过（`bot_main`）
- [x] 为每个策略补充更强的对抗细节（减少无效路径/卡死）
- [x] 增加配置文件（替代纯环境变量，可与环境变量混合）

## 未完成

- 无

---

## 策略目标追踪

### 1) 拦截者 (The Interceptor)

红色 `#FF0000`，uid `interceptor`，名称 `interceptor`。

**目标逻辑**：

1. 锁定最长目标：通过 `state.getOtherPlayers()` 找到长度最长的猎物。
2. 预判位置：根据目标头部与第二节估计方向，预测其未来 3~5 格位置。
3. 行动决策：向预测点逼近，尽量制造同归于尽机会。

**状态**：
- [x] 基础版本已实现（最长目标 + 方向预判 + 逼近）

---

### 2) 暴食者 (The Glutton)

黄色 `#FFFF00`，uid `glutton`，名称 `glutton`。

**目标逻辑**：

1. 计算价值：遍历所有食物。
2. 寻找冲突：计算每个食物的 `D_me` 与最近对手 `D_player`。
3. 行动决策：优先抢“我先到且对手也接近”的食物；否则吃最近食物。

**状态**：
- [x] 基础版本已实现（冲突打分 + 激进吃食）
- [x] 更精确的冲突预测（加入一步前瞻与无效冲刺惩罚）

---

### 3) 巡逻兵 (The Patroller)

蓝色 `#0000FF`，uid `patroller`，名称 `patroller`。

**目标逻辑**：

1. 划分区域：100x100 地图虚拟四象限。
2. 确定轨迹：在象限内构造巡逻矩形并按顶点循环。
3. 避障回归：受阻时临时避障，随后回到巡逻路线。

**状态**：
- [x] 基础版本已实现（确定性矩形 + 避障后继续回归）
- [x] 更平滑回归（BFS 最短路回归 + 失败时贪心回退）

---

### 4) 寄生虫 (The Parasite)

紫色 `#800080`，uid `parasite`，名称 `parasite`。

**目标逻辑**：

1. 锁定宿主：选择排行榜第一（当前近似为最长蛇）。
2. 跟随位置：保持头部附近 1 格侧向伴随，不主动撞击。
3. 行动决策：不抢食物、不主动攻击，优先维持伴随关系。

**状态**：
- [x] 基础版本已实现（最长目标 + 侧位跟随）
- [x] 更稳定平行跟随（识别宿主移动趋势并提前站位）
